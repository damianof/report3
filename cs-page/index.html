<html>
    <head>
        <script src="jquery-1.7.2.min.js?hsh=-313359592" type="text/javascript"></script>
    </head>
<body>
<div id="mainContainer">


<link id="csPageStyle" rel="stylesheet" href="dd-learning-path-report-page.css"/>
<!--link id="csPageStyle" rel="stylesheet" href="//ux.tribridge-amplifyhr.com/static/clients/dbi/css/dd-learning-path-report-page.css"/-->
<div id="page-container">
<iframe id="iframeTar" frameborder="0" style="width: 100%;" src="https://ux.tribridge-amplifyhr.com/static/clients/dbi/learningPath/app/loading-dd.html"></iframe>
</div>
<span id="intellasync"></span>
<!--script src="https://sync2-dev.tribridge-amplifyhr.com/media_app/dunkin-report-pilot/"></script-->
<script>
    window.getQueryStringValue = function(key, defaultValue) {
        if (document.location.search && document.location.search.length > 0) {
            var arr = document.location.search.split(key + '=')[1];
            if (arr && arr.length > 0) {
                return arr.split('&')[0];
            } else {
                return defaultValue;
            }
        } else {
            return defaultValue;
        }
    }

    window.setBrand = function() {
        var csPageStyle = '[brand]-learning-path-report-page.css'.replace('[brand]', window.currentBrand.toLowerCase());
        //console && console.log('csPageStyle', csPageStyle);
        document.getElementById('csPageStyle').setAttribute('href', '//ux.tribridge-amplifyhr.com/static/clients/dbi/css/' + csPageStyle);
        $('#iframeTar').attr('src', window.frameUrl + '&brand=' + window.currentBrand);
    };
    window.toggleBrand = function() {
        window.currentBrand = window.currentBrand === 'dd' ? 'br' : 'dd';
        window.setBrand();
    };
    window.onresize = function(event) {
        sizeFrame();
    };
    function sizeFrame() {
        var availableHeight = 200;
    }
    $(function() {
        var _company_key = 'Rgy9IrAKS1rp49rk6oZhPUiCf';
        var _sync_url = 'https://sync2-dev.tribridge-amplifyhr.com/';
        var userData = {
            csodToken: 'testtoken',
            organization: 'dd' // can be 'dd', 'br' or 'ddbr' (if ddbr we wont show the "View Report For ..." button)
        };

        var credsCheck = setInterval(function(){
            
            if (userData.csodToken !== (undefined || '')) {
                clearInterval(credsCheck);

                window.reportId = window.getQueryStringValue('reportId', '');
                window.currentBrand = window.getQueryStringValue('brand', 'dd');

                // for local development
                //var baseUrl = 'http://10.12.6.129:8080/',
                var baseUrl = 'http://10.0.0.6:8080/',
                //var baseUrl = 'http://localhost:8080/',
                    csBaseUrl = baseUrl + 'cs-page/?a=1';
                
                // for production
                //var baseUrl = 'https://ux.tribridge-amplifyhr.com/static/clients/dbi/reporting-center/app/',
                //    csBaseUrl = document.location.href.split('&')[0];

                window.frameUrl = baseUrl
                    + '?token=' + userData.csodToken
                    + '&organization=' + userData.organization
                    + '&compKey=' + _company_key
                    + '&baseUrl=' + _sync_url
                    + '&csBaseUrl=' + csBaseUrl
                    + '&reportId=' + window.reportId;
                    //+ '&widgets=widgetList';
                //console && console.log('frameUrl', frameUrl);
                window.setBrand();
            } 
        }, 100);
    });
</script>





</div>
</body>
</html>