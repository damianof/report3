<link id="csPageStyle" rel="stylesheet" href="//ux.tribridge-amplifyhr.com/static/clients/dbi/css/dd-learning-path-report-page.css"/>
<div id="page-header">
    <div class="banner learning-path-report">
        <img src="//ux.tribridge-amplifyhr.com/static/clients/dbi/img/lp-icon.png"/>
        <h2>Learning Path Report</h2>

        <a class="button return" id="return" href="javascript:alert('not implemented yet')">
            <img src="/clientimg/dunkinbrands/welcome/forms/back-arrow.png"/>
            Back to <strong>Reporting Center</strong></a>
        <a class="button viewFor" id="viewFor" href="javascript:window.toggleBrand()">
            <img src="/clientimg/dunkinbrands/welcome/forms/back-arrow.png"/>
            View report for <strong id="viewForCaption"></strong></a>
    </div>
</div>
<div id="page-container">
<iframe id="iframeTar" frameborder="0" style="width: 100%;" src="https://ux.tribridge-amplifyhr.com/static/clients/dbi/learningPath/app/loading-dd.html"></iframe>
</div>
<span id="intellasync"></span>
<script src="https://sync2-dev.tribridge-amplifyhr.com/media_app/dunkin-report-pilot/"></script>
<script>
    window.toggleBrand = function() {
        window.currentBrand = window.currentBrand === 'DD' ? 'BR' : 'DD';
        viewForCaption.innerHTML = window.currentBrand === 'DD' ? 'Baskin-Robbins' : 'Dunkin Donuts';
        var csPageStyle = '[brand]-learning-path-report-page.css'.replace('[brand]', window.currentBrand.toLowerCase());
        console.log('csPageStyle', csPageStyle);
        document.getElementById('csPageStyle').setAttribute('href', '//ux.tribridge-amplifyhr.com/static/clients/dbi/css/' + csPageStyle);
        $('#iframeTar').attr('src', window.frameUrl + '?brand=' + window.currentBrand);
    };
    window.onresize = function(event) {
        console.log('sizeFrame');
        sizeFrame();
    };
    function sizeFrame() {
        var availableHeight = 200;
    }
    $(function() {
        var _company_key = 'Rgy9IrAKS1rp49rk6oZhPUiCf';
        var _sync_url = 'https://sync2-dev.tribridge-amplifyhr.com/';
        var userData = {
            csodToken: 'testtoken'
        };

        var credsCheck = setInterval(function(){
            
            if (userData.csodToken !== (undefined || '')) {
                clearInterval(credsCheck);
                var baseUrl = 'https://ux.tribridge-amplifyhr.com/static/clients/dbi/learning-path-report/app/'; // for production
                window.frameUrl = baseUrl
                    + '?token=' + userData.csodToken
                    + '&compKey=' + _company_key
                    + '&baseUrl=' + _sync_url;
                    //+ '&widgets=widgetList';
                //console.log('frameUrl', frameUrl);
                window.currentBrand = 'BR';
                window.toggleBrand();
            } 
        }, 100);
    });
</script>